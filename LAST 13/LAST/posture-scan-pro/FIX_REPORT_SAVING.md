# 运动报告保存问题解决方案

## 问题描述
用户发现运动训练报告没有保存到数据库中。

## 问题原因
经过排查发现，后端服务器 (API Server) 没有运行，导致前端无法将运动数据保存到数据库。

## 解决步骤

### 1. 启动后端服务器

在项目根目录下运行：

```bash
# 方法1: 使用启动脚本
./start_backend.sh

# 方法2: 直接运行
node server.js

# 方法3: 开发模式运行
npm run server
```

### 2. 验证服务器启动成功

打开浏览器访问：http://localhost:3001/api/health

应该看到：
```json
{
  "status": "ok",
  "database": "connected"
}
```

### 3. 测试运动报告保存

1. 打开前端应用
2. 进入深蹲或二头弯举训练页面
3. 选择患者
4. 完成训练
5. 训练完成后，检查控制台是否有保存成功的日志

## 数据库状态

✅ **exercise_reports 表** - 已创建并工作正常
✅ **exercise_rep_details 表** - 已创建并工作正常
✅ **患者数据** - 已有 3 位患者 (ID: 4, 5, 7)

## 已修复的代码问题

1. **参数格式不匹配** - 修复了前端使用 snake_case 而后端期望 camelCase 的问题
2. **添加调试日志** - 在保存过程中添加详细的控制台日志
3. **错误处理改进** - 提供更详细的错误信息

## 端口信息

- **前端**: http://localhost:3000
- **后端API**: http://localhost:3001

## 注意事项

1. 确保数据库服务正在运行
2. 确保 `.env` 文件中的数据库配置正确
3. 确保 3001 端口没有被其他程序占用

## 故障排除

如果仍有问题，请检查：

1. **数据库连接**:
   ```bash
   node test_database.js
   ```

2. **服务器日志** - 查看服务器启动时的错误信息

3. **网络请求** - 在浏览器开发者工具的 Network 面板查看 API 请求状态

4. **患者选择** - 确保训练前已选择有效的患者（当前可用的患者ID: 4, 5, 7）